<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Flowchart of Regex</title>
    <style type="text/css">
        .end-element {
            fill: #FFCCFF;
        }

        #cond1 {
            fill: red;
        }
    </style>
    <!-- Use CDN for flowchart libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js"></script>
    <!-- jQuery is optional for flowchart.js; only keep if you actually need it. -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.17.1/flowchart.min.js"></script>
    <!-- <script src="../release/flowchart.min.js"></script> -->
    <script>

        window.onload = function () {
            var btn = document.getElementById("run"),
                cd = document.getElementById("code"),
                chart;

            (btn.onclick = function () {
                var code = cd.value;

                if (chart) {
                    chart.clean();
                }

                chart = flowchart.parse(code);
                chart.drawSVG('canvas', {
                    // 'x': 30,
                    // 'y': 50,
                    'line-width': 3,
                    'maxWidth': 3,//ensures the flowcharts fits within a certian width
                    'line-length': 50,
                    'text-margin': 10,
                    'font-size': 14,
                    'font': 'normal',
                    'font-family': 'Helvetica',
                    'font-weight': 'normal',
                    'font-color': 'black',
                    'line-color': 'black',
                    'element-color': 'black',
                    'fill': 'white',
                    'yes-text': 'yes',
                    'no-text': 'no',
                    'arrow-end': 'block',
                    'scale': 1,
                    'symbols': {
                        'start': {
                            'font-color': 'red',
                            'element-color': 'green',
                            'fill': 'yellow'
                        },
                        'end': {
                            'class': 'end-element'
                        },
                    },
                    'flowstate': {
                        'past': { 'fill': '#CCCCCC', 'font-size': 12 },
                        'current': { 'fill': 'yellow', 'font-color': 'red', 'font-weight': 'bold' },
                        'future': { 'fill': '#FFFF99' },
                        'request': { 'fill': 'blue' },
                        'invalid': { 'fill': '#444444' },
                        'approved': { 'fill': '#58C4A3', 'font-size': 12, 'yes-text': 'APPROVED', 'no-text': 'n/a' },
                        'rejected': { 'fill': '#C45879', 'font-size': 12, 'yes-text': 'n/a', 'no-text': 'REJECTED' }
                    }
                });

                $('[id^=sub1]').click(function () {
                    alert('info here');
                });
            })();

        };

        function myFunction(event, node) {
            console.log("You just clicked this node:", node);
        }

    </script>
</head>

<body>
    <div><textarea id="code" style="width: 100%;" rows="11">
st=>start: Start
op1=>operation: n=0
op2=>operation: 从第n个字符之前尝试匹配
op3=>operation: n=n+1
cond1=>condition: 是否匹配
cond2=>condition: n==字符串长度
o1=>inputoutput: 输出匹配项
o2=>inputoutput: 不匹配
e=>end

st->op1->op2->cond1
cond1(yes)->o1->e
cond1(no)->op3(right)->cond2
cond2(yes)->o2->e
cond2(no)->op2

</textarea>
    </div>
    <div><button id="run" type="button">Run</button></div>
    <div id="canvas"></div>
</body>

</html>